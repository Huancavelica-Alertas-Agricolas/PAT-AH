# Snippet: generar Prisma Client durante build (agregar después de `RUN npm ci ...` en la etapa builder)
# Usa el schema local si existe o `/tmp/schema.prisma` si se copió previamente durante la orquestación.
RUN if [ -f ./prisma/schema.prisma ]; then \
      npx prisma@5.22.0 generate --schema=./prisma/schema.prisma || true; \
    elif [ -f /tmp/schema.prisma ]; then \
      npx prisma@5.22.0 generate --schema=/tmp/schema.prisma || true; \
    else \
      echo "[prisma] no schema found, skipping generate"; \
    fi
